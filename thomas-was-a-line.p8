pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
x = 8
y = 64
l = 0
d=-1 -- default x direction
button=7 -- null as always false
hmsg="null"
vmsg="thomas was a line"
player=0	
-- test table of player chars
players={{0,5,-1,8,64},
         {1,8,1,64,64},
         {2,11,0,64,8} 
        }		
targets={{0,21,-1,120,64}
        }
maxplayers=1 -- starting at zero

initlevels()
end

function initlevels()
levels={{"  [press z (or üÖæÔ∏è)]" },
        {"there must be more than this!"},
        {"fin - for now. come back for more]"}
       }
end

function _update()
  if (l==0) then
    hmsg="  [arrow keys to move ‚¨ÖÔ∏è or ‚û°Ô∏è]"
  else
    hmsg=levels[l][1]
  end
  x=players[player+1][4]
  y=players[player+1][5]
  d=players[player+1][3]
  if d<0 then
    if btn(0) then 
      x=x-2 
      button=0
    elseif btn(1) then
      x=x+2 
      button=1
    elseif button==0 then
      if x==flr(x/8)*8 then
        button=7
      else x-=2
      end
    elseif button==1 then
      if x==flr(x/8)*8 then
        button=7
      else x+=2
      end
    end
  elseif d>0 then
    if btn(2) then 
      y=y-2 
      button=2
    elseif btn(3) then
      y=y+2 
      button=3
    elseif button==2 then
      if y==flr(y/8)*8 then
        button=7
      else y-=2
      end
    elseif button==3 then
      if y==flr(y/8)*8 then
        button=7
      else y+=2
      end
    end
  end
  
  if btnp(4) then d=d*-1 end
 
-- correcting for screen  
  if (x<8) then x=8
  elseif x>120 then 
    x=120
  end
  if (y<8) then y=8
  elseif (y>=120) then y=120 
  end

-- reassigning player values
  players[player+1][4]=x
  players[player+1][5]=y
  players[player+1][3]=d

   if btnp(5) then player+=1
    if player>#players-1 
      or player>maxplayers-1 then
      player = 0
    end
  end  
-- level 0 hack
  if l==0 and 
    players[player+1][4]==120 
    and 
    players[player+1][5]==64
  then
    l=1
    player=0
    players[player+1][3]=1
    players[player+1][4]=8
    players[player+1][5]=64
  end
  -- level 1 hack
  if l==1 and 
    players[player+1][4]==120 
    and 
    players[player+1][5]==64
    and
    players[player+1][3]>0
  then
    l=2
    player=0
    players[player+1][3]=-1
    players[player+1][4]=8
    players[player+1][5]=64
  end
  -- level 2 hack
  if l==2 and x==120 and y==56
  and d>0
  then
    l=3
    player=0
    players[player+1][4]=8
    players[player+1][5]=64
  end


--    if l>15 then l=0 end
end

function _draw()
  cls(2)
-- matches mike's original 
-- colour scheme
  map((l%8)*16,(flr(l/8)*16),0,0)
  print("") 
  print("") --comment out for debug messages below
--  print("but: "..button.." x: "..x.." y: "..y)
  -- horiz message, if any
  print(hmsg)

-- vert message, if any
-- make sure it is <16 chars
  for i=1,#vmsg do
    print(
      sub(vmsg,
      i,i))
  end

-- level 0 hack
  if l==0 then
    spr((targets[player+1][2])+
         targets[player+1][3],
       targets[player+1][4],
       targets[player+1][5])
--    spr(17, 120,64)
  elseif l==1 then
    if d<0 then
      spr((
        targets[player+1][2]),
 --        targets[player+1][3],
       targets[player+1][4],
       targets[player+1][5])
--        spr(18,120,64)
    else
      spr((
        targets[player+1][2])+d,
 --        targets[player+1][3],
       targets[player+1][4],
       targets[player+1][5])
    end 
  elseif l==2 then
    if y==56 then
      if d<0 then
        spr(22, 120, 56)
      else
        spr(21,120,56)
      end
    end  
  --  spr(18, 120, 56) 
  end

  drawplayer()
end

function drawplayer()

  spr((players[player+1][2])+
         players[player+1][3],
       players[player+1][4],
       players[player+1][5])
end
__gfx__
000000000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
000000000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
007007000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
00077000777777770007700000077000444444440004400000044000999999990009900000099000aaaaaaaa000aa000000aa000888888880008800000088000
00077000777777770007700000077000444444440004400000044000999999990009900000099000aaaaaaaa000aa000000aa000888888880008800000088000
007007000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
000000000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
000000000000000000000000000770000000000000000000000440000000000000000000000990000000000000000000000aa000000000000000000000088000
000000000000000000000000000070000000000000000000000400000000000000000000000900000000000000000000000a0000000000000000000000080000
0000000000000000000000000007000000000000000000000000400000000000000000000000900000000000000000000000a000000000000000000000008000
000000000000000000000000000070000000000000000000000400000000000000000000000900000000000000000000000a0000000000000000000000080000
00000000070707070007000000070000404040400000400000004000909090900000900000009000a0a0a0a00000a0000000a000808080800000800000008000
000000007070707000007000000070000404040400040000000400000909090900090000000900000a0a0a0a000a0000000a0000080808080008000000080000
0000000000000000000000000007000000000000000000000000400000000000000000000000900000000000000000000000a000000000000000000000008000
000000000000000000000000000070000000000000000000000400000000000000000000000900000000000000000000000a0000000000000000000000080000
0000000000000000000000000007000000000000000000000000400000000000000000000000900000000000000000000000a000000000000000000000008000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000007000070070007000700077007007000070070700700770007007770070700000707007007070700070707700707700007077070070777000707777
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000070000000700000007000000070000000700000007000000070000000700000
00000000000000000000000000000000007000000070000000700000007000000000000000000000000000000000000000700000007000000070000000700000
00000000000000000070000000700000000000000000000000700000007000000000000000000000007000000070000000000000000000000070000000700000
00000000007000000000000000700000000000000070000000000000007000000000000000700000000000000070000000000000007000000000000000700000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00770000007700070077007000770077007707000077070700770770007707770077700000777007007770700077707700777700007777070077777000777777
00700000007000000070000000700000007000000070000000700000007000000070000000700000007000000070000000700000007000000070000000700000
00000000000000000000000000000000000000000000000000000000000000000070000000700000007000000070000000700000007000000070000000700000
00000000000000000000000000000000007000000070000000700000007000000000000000000000000000000000000000700000007000000070000000700000
00000000000000000070000000700000000000000000000000700000007000000000000000000000007000000070000000000000000000000070000000700000
00000000007000000000000000700000000000000070000000000000007000000000000000700000000000000070000000000000007000000000000000700000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000070000070700007007000077070007000700070707000770070007770700700007007007070070700700707707007700070077070700777007007777
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000700000007000000070000000700000007000000070000000700000007000000
00000000000000000000000000000000070000000700000007000000070000000000000000000000000000000000000007000000070000000700000007000000
00000000000000000700000007000000000000000000000007000000070000000000000000000000070000000700000000000000000000000700000007000000
00000000070000000000000007000000000000000700000000000000070000000000000007000000000000000700000000000000070000000000000007000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07070000070700070707007007070077070707000707070707070770070707770707700007077007070770700707707007077077070777000707770707077770
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000070000000700000007000000070000000700000007000000070000000700000007000000070000000700000007000000070000000700000007000000
00000000000000000000000000000000000000000000000000000000000000000700000007000000070000000700000007000000070000000700000007000000
00000000000000000000000000000000070000000700000007000000070000000000000000000000000000000000000000000000070000000700000007000000
00000000000000000700000007000000000000000000000007000000070000000000000000000000070000000700000007000000000000000000000007000000
00000000070000000000000007000000000000000700000000000000070000000000000007000000000000000000000007000000000000000700000000000000
__map__
00544f4d205741532041204c494e450000535552452041532059204953205a00010000000000000000000000000000010100000000000000000000000000000101000000000000000000000000000001010000000000000000000000000000010100000000000000000000000000000101000000000000000000000000000001
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000101000000000000000000000000000001010000000000000000000000000000010100000000000000000000000000000101000000000000000000000000000001010000000000000000000000000000010100000000000000000000000000000101000000000000000000000000000002
